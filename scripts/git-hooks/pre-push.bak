#!/usr/bin/env pwsh
param()
$ErrorActionPreference = 'Stop'
Write-Host "[hook pre-push] NO_MOCKS check..."
$ps1 = Join-Path (Resolve-Path "..").Path "ci\no-mocks-check.ps1"
& pwsh -NoProfile -ExecutionPolicy Bypass -File $ps1
if ($LASTEXITCODE -ne 0) {
  Write-Host "[hook pre-push] ECHEC no-mocks; push annul√©."
  exit 1
}
Write-Host "[hook pre-push] OK"
exit 0
